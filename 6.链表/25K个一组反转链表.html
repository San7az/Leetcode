<script>
  /**
   * Definition for singly-linked list.
   * function ListNode(val, next) {
   *     this.val = (val===undefined ? 0 : val)
   *     this.next = (next===undefined ? null : next)
   * }
   */
  /**
   * @param {ListNode} head
   * @param {number} k
   * @return {ListNode}
   */
  function reverseKGroup(head, k) {
    if (!head || k <= 1) {
      return head
    }
    let dummy = new ListNode(0)
    dummy.next = head
    let pre = dummy,
      end = dummy
    while (end.next !== null) {
      for (let i = 0; i < k && end !== null; i++) {
        end = end.next
      }
      if (end === null) {
        break
      }
      let start = pre.next
      let then = end.next
      end.next = null
      pre.next = reverse(start)
      start.next = then
      pre = start
      end = pre
    }
    return dummy.next
  }
  function reverse(head) {
    let prev = null,
      curr = head
    while (curr !== null) {
      let next = curr.next
      curr.next = prev
      prev = curr
      curr = next
    }
    return prev
  }
</script>
